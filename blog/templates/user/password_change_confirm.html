{% extends "base.html" %}
{% block extra-css %}
<style>
    footer {
        position: fixed;
        bottom: 0;
        width: 100%;
    }

    form ul li {
        display: none;
    }

    input.is-invalid~ul li {
        display: list-item;
    }

    .helptext {
        display: none;
    }

    input.is-invalid+.helptext {
        display: block;
    }

    #id_new_password1 {
        margin-left: 95px;
    }
</style>
{% endblock extra-css %}
{% block main-content %}
<div class="container">
    {% if validlink %}
    <h2 class="text-gradient">Set a New Password</h2>
    {% for error in form.new_password2.errors %}
    <div class="text-danger small">{{ error }}</div>
    {% endfor %}
    <form method="post" action="">
        {% csrf_token %}
        <div class="mb-3">
            {{ form.new_password1.label_tag }}
            {{ form.new_password1 }}
            <div class="helptext">
                {{ form.new_password1.help_text }}
            </div>
            <ul>
                <li>Your password can't be too similar to your personal info.</li>
                <li>Must contain at least 8 characters.</li>
                <li>Can't be a commonly used password.</li>
                <li>Can't be entirely numeric.</li>
            </ul>
            {% for error in form.new_password1.errors %}
            <div class="text-danger small">{{ error }}</div>
            {% endfor %}
        </div>
    
        <div class="mb-3">
            {{ form.new_password2.label_tag }}
            {{ form.new_password2 }}
        
        </div>
    
        <button type="submit" class="btn btn-outline">Reset Password</button>
    </form>
    {% else %}
    <h2>Invalid Link</h2>
    <p>This password reset link is no longer valid. Please request a new one.</p>
    <a href="{% url 'password_reset' %}" class="btn btn-outline">Try Again</a>
    {% endif %}
</div>
{% endblock main-content %}